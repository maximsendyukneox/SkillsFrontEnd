@inherits LayoutComponentBase
@inject NavigationManager nav


<MudThemeProvider @bind-IsDarkMode="@isDarkMode" Theme="@neoxTheme" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1" Color="Color.Primary">
        <MudPaper Class="d-flex justify-center flex-grow-1 gap-12" Elevation="0" Style="background-color:inherit;height:100%;">
            <MudImage Src=@(isDarkMode ? "./Images/logo/neoxLogoWhite.svg" : "./Images/logo/neoxLogoWhite.svg") Alt="neox Logo" Style="width:7rem;" @onclick="NavigateHome"></MudImage>
            <MudHidden Breakpoint="Breakpoint.SmAndDown">
                <MudButton Style="@(nav.Uri == nav.BaseUri+"employees"? activeLinkStyle : "")" uid="navmenu_employees" Href="/employees" Variant="Variant.Filled" DisableElevation="true" StartIcon="@Icons.Material.Filled.Groups" Color="Color.Primary">Mitarbeiter</MudButton>
                <MudButton Style="@(nav.Uri == nav.BaseUri+"search-byskill"? activeLinkStyle : "")" Href="/search-byskill" Variant="Variant.Filled" DisableElevation="true" StartIcon="@Icons.Material.Filled.ManageSearch" Color="Color.Primary">Suche</MudButton>
                <MudButton Style="@(nav.Uri == nav.BaseUri+"archive"? activeLinkStyle : "")" Href="/archive" Variant="Variant.Filled" DisableElevation="true" StartIcon="@Icons.Material.Filled.GroupOff" Color="Color.Primary">Archiv</MudButton>
                <MudButton Style="@(nav.Uri == nav.BaseUri+"logout"? activeLinkStyle : "")" Variant="Variant.Filled" DisableElevation="true" StartIcon="@Icons.Material.Filled.Logout" Color="Color.Primary">Logout</MudButton>
                <MudIconButton @onclick="OnDarkModeActivated" Size="Size.Small" Color="Color.Info" Icon="@themeIcon"/>
            </MudHidden>
        </MudPaper>
        <MudHidden Breakpoint="Breakpoint.MdAndUp">
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
        </MudHidden>
    </MudAppBar>
    <MudDrawer Class="mud-theme-tertiary" @bind-Open="_drawerOpen" Anchor="Anchor.Top" Variant="@DrawerVariant.Temporary" Elevation="2">
        <MudDrawerHeader>
             <MudImage Src=@(isDarkMode ? "./Images/logo/neoxLogoWhite.svg" : "./Images/logo/neoxLogo.svg") Alt="neox Logo" Style="width:7rem;" @onclick="NavigateHome"></MudImage>
        </MudDrawerHeader>
        <MudDrawerContainer>
            <MudNavMenu Color="Color.Secondary" Style="@mobileMenufontColor">
                <MudNavLink Href="/employees" Icon="@Icons.Material.Filled.Groups" Match="NavLinkMatch.All">Mitarbeiter</MudNavLink>
                <MudNavLink Href="/search-byskill" Icon="@Icons.Material.Filled.ManageSearch" Match="NavLinkMatch.All">Suche</MudNavLink>
                <MudNavLink Href ="/archive" Icon="@Icons.Material.Filled.GroupOff" Match="NavLinkMatch.All">Archiv</MudNavLink>
                <MudNavLink Icon="@Icons.Material.Filled.Logout" Match="NavLinkMatch.All">Logout</MudNavLink>
                <MudNavLink Icon="@themeIcon" @onclick="OnDarkModeActivated" Match="NavLinkMatch.All"></MudNavLink>
            </MudNavMenu>
        </MudDrawerContainer>
    </MudDrawer>
    <MudMainContent Class="mud-theme-background">    
        @Body
    </MudMainContent>
</MudLayout>


@code {
    bool _drawerOpen = false;
    bool isDarkMode;
    string themeIcon = Icons.Material.Filled.DarkMode;
    public string mobileMenufontColor = "color: black;";
    public string activeLinkStyle = "border-bottom: 4px solid #5286B3;border-radius:0;height:auto;padding: 11px 16px 6px 16px;";

    MudTheme neoxTheme = new MudTheme()
    {
            Palette = new PaletteLight()
            {
                Primary = "#303030", // #243246 dunkles neox blau
                Secondary = "#5286B3", // #4b7396 helles neox blau
                Tertiary = "#fff",
                Info = "#fff",
                Surface = "#fff",
                TextPrimary = "#000",
                Background = "#f5f5f5",
                Error = "#ff0000",           
            },
            PaletteDark = new PaletteDark()
            {
                Primary = "#191A1C", // vordergrund
                Secondary = "#2576f7", // hintergrund 029ce3 2576f7
                Tertiary = "#121212", //                
                Info = "#fff",
                Surface = "#303030",
                TextPrimary = "#fff",
                Background = "#121212",
                Error = "#ff0000",              
            },
            Typography = new Typography()
            {
                Default = new Default()
                {
                    FontFamily = new[] {"Nunito Sans","Roboto","Poppins", "sans-serif" }
                }
            }
    };

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    private void OnDarkModeActivated()
    {
        themeIcon = isDarkMode ? Icons.Material.Filled.DarkMode : Icons.Material.Filled.LightMode;
        mobileMenufontColor = isDarkMode ? "color: black;" : "color: white;";
        activeLinkStyle = isDarkMode ? "border-bottom: 4px solid #5286B3;border-radius:0;height:auto;padding: 11px 16px 6px 16px;" : "border-bottom: 4px solid #2576F7;border-radius:0;height:auto;padding: 11px 16px 6px 16px;";
        isDarkMode = !isDarkMode;
    }

    private void NavigateHome ()
    {
        nav.NavigateTo("/");
    }
}

